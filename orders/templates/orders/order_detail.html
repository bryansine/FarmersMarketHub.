{% extends "base.html" %}
{% block content %}
<div style="max-width:800px;margin:auto;padding:20px;">
    <h2>Order #{{ order.id }}</h2>

    <p><strong>Status:</strong> {{ order.status|title }}</p>
    <p><strong>Total:</strong> KES {{ order.total }}</p>
    <p><strong>Phone:</strong> {{ order.phone_number }}</p>
    <p><strong>Created:</strong> {{ order.created_at }}</p>

    <h3 style="margin-top:20px;">Items</h3>

    <table style="width:100%;border-collapse:collapse;">
        <tr style="font-weight:bold;border-bottom:1px solid #ccc;">
            <td>Product</td>
            <td>Qty</td>
            <td>Price</td>
            <td>Total</td>
        </tr>

        {% for item in order.items.all %}
        <tr style="border-bottom:1px solid #eee;">
            <td>{{ item.product.name }}</td>
            <td>{{ item.quantity }}</td>
            <td>KES {{ item.price }}</td>
            <td>KES {{ item.line_total }}</td>
        </tr>
        {% endfor %}
    </table>

    {% if order.status == "pending" %}
        <p style="margin-top:20px;color:orange;">
            Waiting for payment confirmation (check your phone).
        </p>
    {% elif order.status == "paid" %}
        <p style="margin-top:20px;color:green;font-weight:bold;">
            Payment confirmed! Thank you.
        </p>
    {% elif order.status == "failed" %}
        <p style="margin-top:20px;color:red;">
            Payment failed. Try again via checkout page.
        </p>
    {% endif %}
</div>
{% endblock %}
